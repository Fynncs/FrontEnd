<form [formGroup]="codeForm" (ngSubmit)="onSubmitCode()">
    <div class="code-input-container">
      <input 
        *ngFor="let digit of digits; let i = index"
        #inputRef
        matInput
        maxlength="1"
        class="code-input"
        type="text"
        [formControlName]="'digit' + i"
        (input)="moveFocus($event, i)"
        [attr.aria-describedby]="'error' + i"
      />
    </div>
    <mat-error *ngIf="codeForm.invalid && codeForm.touched" style="text-align: center; display: flex; justify-content: center; align-items: center;">
      Certifique-se de preencher corretamente os 6 dígitos.
    </mat-error>
  
    <!-- Mensagem de erro para cada campo individual -->
    <div *ngFor="let i of digits; let idx = index">
      <mat-error *ngIf="codeForm.get('digit' + idx)?.hasError('required') && codeForm.get('digit' + idx)?.touched">
        O dígito {{idx + 1}} é obrigatório.
      </mat-error>
      <mat-error *ngIf="codeForm.get('digit' + idx)?.hasError('pattern') && codeForm.get('digit' + idx)?.touched">
        O dígito {{idx + 1}} deve ser numérico.
      </mat-error>
    </div>
  
    <div *ngIf="isCodeValid" class="success-message">
      ✅ Código validado com sucesso!
    </div>
  </form>
  